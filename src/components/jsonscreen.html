<!DOCTYPE html>
<html>
<head>
  <title>JSON File Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      margin-top: 0;
    }

    label {
      display: block;
      margin-top: 10px;
    }

    input[type="text"] {
      width: 300px;
    }

    textarea {
      width: 300px;
      height: 200px;
    }

    select {
      width: 300px;
    }

    button {
      margin-top: 20px;
    }

    .classElement {
      border: 1px solid #ccc;
      padding: 10px;
      margin-top: 10px;
    }

    .classDetails {
      display: none;
      margin-top: 10px;
    }

    .classDetails label {
      display: block;
      margin-top: 5px;
    }

    .keyValuePairsContainer {
      margin-top: 10px;
      margin-bottom: 20px;
    }

    .keyValuePairsContainer .keyValuePair {
      display: flex;
      align-items: center;
      margin-top: 5px;
    }

    .keyValuePairsContainer .keyValuePair input[type="text"] {
      width: 200px;
    }

    .keyValuePairsContainer .keyValuePair button {
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <h1>JSON File Generator</h1>
  <form id="jsonForm">
    <div id="classContainer">
      <div class="classElement">
        <div>
          <button type="button" class="editButton">Edit</button>
          <button type="button" class="deleteButton">Delete</button>
        </div>
        <label for="className">Name:</label>
        <input type="text" class="className" required>
        <div class="classDetails">
          <div class="keyValuePairsContainer">
            <div class="keyValuePair">
              <input type="text" class="key" placeholder="Key" required>
              <input type="text" class="value" placeholder="Value" required>
              <button type="button" class="editKeyValuePairButton">Edit</button>
              <button type="button" class="deleteKeyValuePairButton">Delete</button>
            </div>
          </div>
          <button type="button" class="addKeyValuePairButton">Add Key-Value Pair</button>
        </div>
      </div>
    </div>

    <button type="button" id="addNewClassButton">Add New Class</button>
    <button type="submit">Generate JSON File</button>
  </form>

  <script>
    function addDeleteButtonListener(deleteButton) {
      deleteButton.addEventListener("click", function() {
        var classElement = deleteButton.parentNode.parentNode;
        classElement.parentNode.removeChild(classElement);
      });
    }

    function addEditClassButtonListener(editButton, classElement) {
      var classDetails = classElement.querySelector(".classDetails");
      var classNameInput = classElement.querySelector(".className");
      var keyValuePairsContainer = classElement.querySelector(".keyValuePairsContainer");
      var addKeyValuePairButton = classElement.querySelector(".addKeyValuePairButton");

      editButton.addEventListener("click", function() {
        classDetails.style.display = "block";
        classNameInput.disabled = false;
        addKeyValuePairButton.disabled = false;

        var editButtons = classElement.querySelectorAll(".editKeyValuePairButton");
        var deleteButtons = classElement.querySelectorAll(".deleteKeyValuePairButton");

        for (var i = 0; i < editButtons.length; i++) {
          editButtons[i].disabled = false;
        }

        for (var j = 0; j < deleteButtons.length; j++) {
          deleteButtons[j].disabled = false;
        }
      });
    }

    function addEditKeyValuePairButtonListener(editButton, keyInput, valueInput) {
      editButton.addEventListener("click", function() {
        keyInput.disabled = false;
        valueInput.disabled = false;
      });
    }

    function addDeleteKeyValuePairButtonListener(deleteButton) {
      deleteButton.addEventListener("click", function() {
        var keyValuePair = deleteButton.parentNode;
        keyValuePair.parentNode.removeChild(keyValuePair);
      });
    }

    function addAddKeyValuePairButtonListener(addButton, keyValuePairsContainer) {
      addButton.addEventListener("click", function() {
        var keyValuePair = document.createElement("div");
        keyValuePair.classList.add("keyValuePair");

        var keyInput = document.createElement("input");
        keyInput.type = "text";
        keyInput.placeholder = "Key";
        keyInput.required = true;

        var valueInput = document.createElement("input");
        valueInput.type = "text";
        valueInput.placeholder = "Value";
        valueInput.required = true;

        var editButton = document.createElement("button");
        editButton.type = "button";
        editButton.textContent = "Edit";

        var deleteButton = document.createElement("button");
        deleteButton.type = "button";
        deleteButton.textContent = "Delete";

        addEditKeyValuePairButtonListener(editButton, keyInput, valueInput);
        addDeleteKeyValuePairButtonListener(deleteButton);

        keyValuePair.appendChild(keyInput);
        keyValuePair.appendChild(valueInput);
        keyValuePair.appendChild(editButton);
        keyValuePair.appendChild(deleteButton);

        keyValuePairsContainer.appendChild(keyValuePair);
      });
    }

    document.addEventListener("DOMContentLoaded", function() {
      var form = document.getElementById("jsonForm");
      var classContainer = document.getElementById("classContainer");
      var addNewClassButton = document.getElementById("addNewClassButton");

      addNewClassButton.addEventListener("click", function() {
        var classElement = document.createElement("div");
        classElement.classList.add("classElement");

        var buttonContainer = document.createElement("div");

        var editButton = document.createElement("button");
        editButton.type = "button";
        editButton.textContent = "Edit";

        var deleteButton = document.createElement("button");
        deleteButton.type = "button";
        deleteButton.textContent = "Delete";

        buttonContainer.appendChild(editButton);
        buttonContainer.appendChild(deleteButton);

        var nameLabel = document.createElement("label");
        nameLabel.textContent = "Name:";

        var nameInput = document.createElement("input");
        nameInput.type = "text";
        nameInput.classList.add("className");
        nameInput.required = true;

        var classDetails = document.createElement("div");
        classDetails.classList.add("classDetails");

        var keyValuePairsContainer = document.createElement("div");
        keyValuePairsContainer.classList.add("keyValuePairsContainer");

        var keyValuePair = document.createElement("div");
        keyValuePair.classList.add("keyValuePair");

        var keyInput = document.createElement("input");
        keyInput.type = "text";
        keyInput.placeholder = "Key";
        keyInput.required = true;

        var valueInput = document.createElement("input");
        valueInput.type = "text";
        valueInput.placeholder = "Value";
        valueInput.required = true;

        var editKeyValuePairButton = document.createElement("button");
        editKeyValuePairButton.type = "button";
        editKeyValuePairButton.textContent = "Edit";

        var deleteKeyValuePairButton = document.createElement("button");
        deleteKeyValuePairButton.type = "button";
        deleteKeyValuePairButton.textContent = "Delete";

        addEditKeyValuePairButtonListener(editKeyValuePairButton, keyInput, valueInput);
        addDeleteKeyValuePairButtonListener(deleteKeyValuePairButton);

        keyValuePair.appendChild(keyInput);
        keyValuePair.appendChild(valueInput);
        keyValuePair.appendChild(editKeyValuePairButton);
        keyValuePair.appendChild(deleteKeyValuePairButton);

        addAddKeyValuePairButtonListener(addKeyValuePairButton, keyValuePairsContainer);

        classElement.appendChild(buttonContainer);
        classElement.appendChild(nameLabel);
        classElement.appendChild(nameInput);
        classElement.appendChild(classDetails);
        classDetails.appendChild(keyValuePairsContainer);
        classDetails.appendChild(addKeyValuePairButton);
        keyValuePairsContainer.appendChild(keyValuePair);

        addEditClassButtonListener(editButton, classElement);
        addDeleteButtonListener(deleteButton);

        classContainer.appendChild(classElement);
      });

      form.addEventListener("submit", function(event) {
        event.preventDefault();

        var classes = [];
        var classElements = document.querySelectorAll(".classElement");

        classElements.forEach(function(classElement) {
          var classNameInput = classElement.querySelector(".className");
          var keyInputs = classElement.querySelectorAll(".keyValuePair .key");
          var valueInputs = classElement.querySelectorAll(".keyValuePair .value");

          var classObject = {
            name: classNameInput.value,
            attributes: {}
          };

          keyInputs.forEach(function(keyInput, index) {
            var valueInput = valueInputs[index];

            if (keyInput.value.trim() !== "" && valueInput.value.trim() !== "") {
              classObject.attributes[keyInput.value] = valueInput.value;
            }
          });

          classes.push(classObject);
        });

        var jsonData = JSON.stringify(classes, null, 2);
        var fileBlob = new Blob([jsonData], { type: "application/json" });
        var fileURL = URL.createObjectURL(fileBlob);

        var downloadLink = document.createElement("a");
        downloadLink.href = fileURL;
        downloadLink.download = "data.json";
        downloadLink.click();
      });
    });
  </script>
</body>
</html>

